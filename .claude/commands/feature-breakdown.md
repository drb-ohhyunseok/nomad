---
name: feature-breakdown
description: 복잡한 문제를 의존성 매핑 및 병렬화 분석을 통해 계층적이고 실행 가능한 작업으로 분해합니다
category: planning
---

# 문제 분해 및 세분화 엔진

이제 **문제 분해 모드**에 진입했습니다. 다음 문제를 계층적이고 실행 가능한 작업 구조로 체계적으로 분해하는 것이 목표입니다.

## 분해할 문제
```
$ARGUMENT
```

## 분석 프레임워크

### 1단계: 문제 이해 🎯

1. **핵심 목표 추출**
   - 주요 목표는 무엇인가?
   - 이 문제의 "완료"를 어떻게 정의하는가?
   - 성공 기준은 무엇인가?

2. **제약사항 식별**
   - 시간 제한
   - 리소스 제약
   - 기술적 의존성
   - 범위 경계

3. **도메인 컨텍스트 결정**
   - Technical (코드/아키텍처/인프라)
   - Business (전략/운영/프로세스)
   - Research (조사/분석/발견)
   - Creative (디자인/콘텐츠/혁신)

4. **복잡도 평가**
   - Simple (2-3단계, 1일 미만)
   - Moderate (4-7단계, 1-3일)
   - Complex (8-15단계, 1-2주)
   - Enterprise (15단계 이상, 2주 이상)

### 2단계: 전략 선택 🔍

문제 분석을 기반으로 분해 전략을 선택합니다:

**Simple Linear (단순 선형)**: 명확한 의존성을 가진 순차적 단계
- 사용 시기: 간단한 워크플로우, 레시피 같은 프로세스
- 구조: 단계 1 → 단계 2 → 단계 3

**Work Breakdown Structure (WBS)**: 계층적 기능 분해
- 사용 시기: 프로젝트 관리, 기능 개발
- 구조: 프로젝트 → 단계 → 작업 → 하위 작업

**Dependency-First (의존성 우선)**: 선행 관계 기반 그래프
- 사용 시기: 복잡한 기술 시스템, 빌드 파이프라인
- 구조: 의존성 식별 → 위상 정렬 → 실행 순서

**Risk-Driven (리스크 주도)**: 높은 불확실성 항목 우선 처리
- 사용 시기: 연구, 실험, 미지의 영역
- 구조: 최고 위험 스파이크 → 검증 → 학습 기반 구축

**Hybrid Approach (하이브리드)**: 필요에 따라 전략 결합
- 사용 시기: 유연성이 필요한 다면적 문제

### 3단계: 계층적 분해 🏗️

다음 계층을 사용하여 구조화된 분해를 생성합니다:

```
📋 PROBLEM (최상위)
│
├─ 🎯 PHASE 1: [주요 마일스톤]
│  │  복잡도: [1-10] | 예상 시간: [기간] | 위험도: [Low/Med/High]
│  │
│  ├─ 📦 Task 1.1: [구체적 결과물]
│  │  │  의존성: [없음 | Task IDs]
│  │  │  병렬화 가능: [Yes ⚡ | No ⏩]
│  │  │
│  │  ├─ ✓ Todo 1.1.1: [원자적 행동]
│  │  ├─ ✓ Todo 1.1.2: [원자적 행동]
│  │  └─ ✓ Todo 1.1.3: [원자적 행동]
│  │
│  └─ 📦 Task 1.2: [구체적 결과물]
│     │  의존성: [Task 1.1]
│     │  병렬화 가능: [No ⏩]
│     │
│     └─ ✓ Todo 1.2.1: [원자적 행동]
│
└─ 🎯 PHASE 2: [주요 마일스톤]
   └─ ...
```

**각 레벨의 메타데이터:**

- **Phase 레벨**:
  - 마일스톤 정의
  - 예상 결과
  - Phase 의존성
  - 예상 기간

- **Task 레벨**:
  - 복잡도 점수 (1-10)
  - 예상 시간
  - 의존성 (task IDs)
  - 병렬화 가능 여부 (yes/no)
  - 위험 수준 (low/medium/high)
  - 할당된 역할/스킬 (해당하는 경우)

- **Todo 레벨**:
  - 원자적 행동 (15-30분 작업 단위)
  - 명확한 완료 기준
  - 필요한 도구/리소스

### 4단계: 의존성 매핑 🔗

1. **의존성 식별**
   - Hard 의존성 (반드시 먼저 완료해야 함)
   - Soft 의존성 (유익하지만 필수는 아님)
   - 리소스 충돌 (동시에 실행 불가)

2. **병렬화 기회 탐지**
   - 모든 독립적인 작업을 ⚡로 표시
   - 병렬화 가능한 작업 그룹화
   - 시간 절약 예상

3. **Critical Path 찾기**
   - 가장 긴 의존성 체인
   - 병목 지점 식별
   - 우선순위 시퀀싱

4. **흐름 시각화**
```
Start
  ↓
Task A ⚡ (병렬)
Task B ⚡ (병렬)
  ↓
Task C ⏩ (A, B에 의존)
  ↓
Task D ⚡ (병렬)
Task E ⚡ (병렬)
  ↓
End
```

### 5단계: 검증 및 최적화 ✅

**완전성 체크:**
- [ ] 모든 하위 작업의 합이 전체 문제를 완성하는가?
- [ ] 중복 작업이 없는가?
- [ ] 누락된 단계나 간격이 없는가?
- [ ] 각 작업이 독립적으로 이해 가능한가?

**품질 게이트:**
- [ ] 모든 작업에 명확한 완료 기준이 있는가
- [ ] 복잡도 점수가 현실적인가 (1-10 척도)
- [ ] 시간 예상이 합리적인가
- [ ] 의존성이 정확하게 매핑되었는가
- [ ] 병렬화 기회가 최대화되었는가

**SMART 기준 적용:**
- **S**pecific (구체적): 명확하고 모호하지 않은 작업
- **M**easurable (측정 가능): 정의된 완료 기준
- **A**chievable (달성 가능): 작업당 현실적인 범위
- **R**elevant (관련성): 전체 목표에 기여
- **T**ime-bound (시간 제한): 예상 기간 제공

### 6단계: 출력 생성 📝

여러 형식으로 구조화된 분해를 생성합니다:

#### 형식 1: 계층적 개요
```markdown
## 📋 Problem: [문제 설명]

**복잡도**: [Simple|Moderate|Complex|Enterprise]
**전략**: [선택한 분해 전략]
**총 예상 시간**: [작업에서 계산됨]
**병렬화 잠재력**: [X% 시간 절약]

---

### 🎯 Phase 1: [마일스톤 이름]
**기간**: [시간] | **위험도**: [수준] | **의존성**: [없음/phases]

#### 📦 Task 1.1: [결과물]
- **복잡도**: 6/10
- **시간**: 4시간
- **의존성**: 없음
- **병렬화 가능**: ⚡ Yes

**Todos:**
- [ ] Todo 1.1.1: [완료 기준이 있는 원자적 행동]
- [ ] Todo 1.1.2: [완료 기준이 있는 원자적 행동]
- [ ] Todo 1.1.3: [완료 기준이 있는 원자적 행동]

#### 📦 Task 1.2: [결과물]
- **복잡도**: 4/10
- **시간**: 2시간
- **의존성**: Task 1.1
- **병렬화 가능**: ⏩ No (순차적)

**Todos:**
- [ ] Todo 1.2.1: [원자적 행동]

---

### 🎯 Phase 2: [마일스톤 이름]
...
```

#### 형식 2: 실행 요약 테이블

| Phase | Task | 복잡도 | 시간 | 의존성 | 병렬 | 위험도 | 상태 |
|-------|------|--------|------|--------|------|--------|------|
| 1 | Task 1.1 | 6/10 | 4h | - | ⚡ Yes | Med | ⏳ 대기 |
| 1 | Task 1.2 | 4/10 | 2h | 1.1 | ⏩ No | Low | ⏳ 대기 |
| 2 | Task 2.1 | 8/10 | 6h | 1.2 | ⚡ Yes | High | ⏳ 대기 |

#### 형식 3: 의존성 그래프 (텍스트 기반)

```
flowchart:
  Start
    ↓
  ┌─────────┬─────────┐
  │ Task 1.1│ Task 1.2│ (병렬 ⚡)
  └─────────┴─────────┘
    ↓
  Task 1.3 (순차 ⏩)
    ↓
  ┌─────────┬─────────┬─────────┐
  │ Task 2.1│ Task 2.2│ Task 2.3│ (병렬 ⚡)
  └─────────┴─────────┴─────────┘
    ↓
  End
```

#### 형식 4: 핵심 인사이트

**🎯 주요 발견사항:**
- 주요 병목지점: [식별된 작업]
- 병렬화 기회: [X개 작업을 동시에 실행 가능]
- Critical path 기간: [Y 시간/일]
- 최고 위험 항목: [주의가 필요한 작업]

**⚡ 최적화 권장사항:**
- [시간/위험 감소를 위한 구체적 제안]
- [리소스 할당 전략]
- [고위험 항목에 대한 대안적 접근]

**⚠️ 위험 완화:**
- [고위험 작업 및 완화 전략]
- [지연을 유발할 수 있는 의존성]
- [권장 체크포인트 및 검증]

### 7단계: TodoWrite 통합 📋

분해 결과를 제시한 후 다음과 같이 질문합니다:

> "[Phase X / 전체 Phase / 특정 작업]에 대한 TodoWrite 항목을 생성할까요?"

긍정적인 경우, TodoWrite 호환 형식을 생성합니다:

```json
{
  "todos": [
    {
      "content": "Task 1.1: [결과물]",
      "status": "pending",
      "activeForm": "Task 1.1 작업 중: [결과물]"
    },
    {
      "content": "Todo 1.1.1: [원자적 행동]",
      "status": "pending",
      "activeForm": "Todo 1.1.1 완료 중: [원자적 행동]"
    }
  ]
}
```

## 실행 가이드라인

### MCP 서버 통합

**Sequential MCP 사용:**
- 복잡한 의존성 분석
- 다차원 문제 평가
- 전략 선택 추론
- 검증 로직

**Serena MCP 사용:**
- 프로젝트 메모리에 분해 구조 저장
- 세션 간 분해 지속성
- 성공적인 분해 패턴 학습

### 모드 활성화

자동으로 활성화:
- **--task-manage**: 계층적 조직화
- **--introspect**: 품질 검증
- **--think**: 복잡한 문제 (표준 깊이)
- **--think-hard**: 엔터프라이즈급 문제

### 적응형 깊이 제어

**Quick Mode** (단순 문제):
- 최대 2-3 phase
- 상위 수준 작업만
- 최소 메타데이터

**Standard Mode** (중간 문제):
- 3-5 phase
- Task 및 todo 레벨
- 필수 메타데이터

**Deep Mode** (복잡한 문제):
- 5+ phase
- 모든 메타데이터를 포함한 전체 계층
- 포괄적인 의존성 매핑
- 위험 분석 및 완화

### 품질 보증

최종 분해를 제시하기 전:

1. **자체 검토 질문:**
   - 익숙하지 않은 사람이 이 분해를 실행할 수 있는가?
   - 모든 의존성이 올바르게 식별되었는가?
   - Critical path가 최적화되었는가?
   - 완료 기준이 측정 가능한가?

2. **성찰 마커:**
   - 🤔 "대안적 분해 전략 고려 중..."
   - 🎯 "[X]개의 병렬화 기회 식별됨"
   - ⚡ "Critical path를 [Y]에서 [Z]시간으로 최적화"
   - 📊 "복잡도 분포: [레벨별 분해]"

## 출력 템플릿

다음 구조로 최종 분해를 제시합니다:

```markdown
# 📋 문제 분해: [문제 제목]

## 🎯 요약
- **복잡도 수준**: [평가]
- **분해 전략**: [선택한 접근법]
- **총 Phase**: [개수]
- **총 Task**: [개수]
- **예상 기간**: [시간]
- **병렬화 잠재력**: [백분율]

## 🔍 문제 분석
[핵심 목표, 제약사항, 도메인 컨텍스트]

## 🏗️ 계층적 분해
[메타데이터를 포함한 상세 phase → task → todo 구조]

## 🔗 의존성 분석
[Critical path, 병목지점, 병렬화 기회]

## ⚡ 최적화 인사이트
[권장사항, 위험 완화, 대안적 접근]

## 📊 실행 로드맵
[모든 작업 및 메타데이터를 포함한 테이블 형식]

## ✅ 다음 단계
1. 분해 검토 및 검증
2. Phase 1에 대한 TodoWrite 항목 생성
3. 리소스 요구사항 식별
4. 진행 상황 추적 설정
```

---

## 최종 지침

1. **분석**: 모든 단계를 체계적으로 사용하여 문제 분석
2. **선택**: 가장 적절한 분해 전략 선택
3. **생성**: 완전한 메타데이터를 포함한 계층적 분해 생성
4. **검증**: 완전성, 품질, 최적화 검증
5. **제시**: 명확하고 실행 가능한 형식으로 제시
6. **제안**: TodoWrite 항목 생성 제안
7. **대기**: 사용자 피드백 기반 개선을 위해 대기

**기억할 사항:**
- 모든 작업은 실행 가능하고 측정 가능해야 함
- 병렬화 및 효율성 최적화
- 위험 평가 및 완화 포함
- 명확성과 전문적 구조 유지
- 시각적 명확성을 위한 기호 사용 (🎯📦✓⚡⏩)

이제 분해 분석을 시작합니다.
